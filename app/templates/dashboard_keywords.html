{% extends "base.html" %}

{% block title %}
Dashboard Keywords
{% endblock %}

{% block main %}
<div class="row justify-content-center m-0">
    <div class="col-11">
        <!--wordcloud e altro-->
        <div class="row mt-4">
            <div class="col-12">
                <div class="row graph-area border shadow-sm text-center">
                    <div class="col-12">
                        <div class="row">
                            <p class="mt-2 mb-0 fw-bold">Wordcloud delle parole chiave</p>
                        </div>
                        <div class="row">
                            <div id="my_dataviz"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--donut parole-->
        <div class="row mt-3">
            <div class="col-12">
                <div class="row graph-area border shadow-sm">
                    <div class="col-12">
                        <div class="row">
                            <p class="mt-2 mb-0 fw-bold text-center">Parole chiave</p>
                        </div>
                        <div class="row row-cols-auto flex-row justify-content-center flex-wrap m-3" id="keywords_space"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

    // set the dimensions and margins of the graph
        var width = 450
            height = 450
            margin = 40

        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
        var radius = Math.min(width, height) / 2 - margin

        // append the svg object to the div called 'my_dataviz'
        var svg = d3.select("#my_dataviz")
        .append("svg")
            .attr("width", width)
            .attr("height", height)
        .append("g")
            .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

        // Create dummy data
        var data = {"a": 9, "b": 20, "c":30, "d":8, "e":12}

        // set the color scale
        var color = d3.scaleOrdinal()
        .domain(data)
        .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56"])

        // Compute the position of each group on the pie:
        var pie = d3.pie()
        .value(function(d) {return d.value; })
        var data_ready = pie(d3.entries(data))

        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
        svg
        .selectAll('whatever')
        .data(data_ready)
        .enter()
        .append('path')
        .attr('d', d3.arc()
            .innerRadius(100)         // This is the size of the donut hole
            .outerRadius(radius)
        )
        .attr('fill', function(d){ return(color(d.data.key)) })
        .attr("stroke", "black")
        .style("stroke-width", "2px")
        .style("opacity", 0.7)
            
    </script>
{% endblock %}